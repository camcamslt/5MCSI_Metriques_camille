<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Engagements par minute</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Google Charts -->
<script type="text/javascript" src=" https://www.gstatic.com/charts/loader.js "></script>

<script type="text/javascript">
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(dessinerChart);

function drawChart(){
// On récupère les données depuis la route Flask
récupérer('/commits-data/')
.then(réponse => réponse.json())
.then(json => {
const résultats = json.résultats || [];

const data = new google.visualization.DataTable();
data.addColumn('string', 'Minute');
data.addColumn('number', 'Nombre de commits');

// On ajoute les 60 minutes (0 à 59)
résultats.forEach(élément => {
const label = item.minute.toString().padStart(2, '0');
données.addRow([label, item.count]);
});

const options = {
titre : 'Nombre de commits par minute (0 à 59)',
largeur : 1200,
hauteur : 600,
légende : { position : 'aucune' },
axe h : {
titre : 'Minute dans l\'heure',
texte incliné : vrai,
Angle d'inclinaison du texte : 45
},
vAxis: {
titre : 'Nombre de commits',
Valeur minimale : 0
},
barre : { largeur_groupe : '90%' },
zone graphique : {
largeur : '80%',
hauteur : '70%'
}
};

const chart = new google.visualization.ColumnChart(
document.getElementById('chart_div')
);
graphique.dessiner(données, options);
})
.catch(err => {
console.error('Erreur lors du fetch /commits-data/ :', err);
document.getElementById('chart_div').innerText =
'Erreur lors du chargement des données.';
});
}
</script>

<style>
corps {
font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
marge : 20px ;
couleur de fond : #f5f5f5 ;
}
h1 {
text-align: centre;
couleur : #333 ;
}
#chart_div {
couleur de fond : #fff;
bordure-radius: 8px;
box-shadow: 0 2px 6px rgba(0,0,0,0.1);
marge intérieure : 20px ;
marge : 20px auto ;
}
</style>
</head>
<corps>
<h1>Combien de commits pour ce projet ?</h1>
<div id="chart_div" style="width: 1200px; height: 600px;"></div>
</body>
</html>
